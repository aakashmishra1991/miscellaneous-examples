<div ng-if="errorMessageComment != null">
	<div>
		<div class="alert alert-danger alert-dismissable">
			<button type="button" class="close" data-dismiss="alert"
				aria-hidden="true">
				<span class="pficon pficon-close"></span>
			</button>
			<span class="pficon pficon-error-circle-o"></span> <strong>Hey
				there is a problem!</strong><br />{{errorMessageComment}}
		</div>
	</div>
</div>
<div ng-if="errorMessageComment == null">
	<p><div class="container-fluid center-block">
		<button class="btn btn-success" type="button" data-toggle="modal"
		data-target="#addCommentModalDetails"
		ng-click="selected(order['case-id'])">Add New Comment</button>
		</div>
	</div></p>

	<p><div class="container-fluid center-block">
		<table class="table table-striped">
			<thead>
			<tr>
				<th>#</th>
				<th>Author</th>
				<th>Comment</th>
				<th>Actions</th>
			</tr>
			</thead>
			<tbody>
			<tr ng-repeat="comment in comments">
				<td> {{$index + 1}} </td>
				<td>{{ comment['author'] }}</td>
				<td>{{ comment['text'] }}</td>
				<td>

						<button class="btn btn-primary" data-toggle="modal"
								data-target="#editCommentModalDetails"
								ng-click="editComment(order['case-id'], comment)">Edit</button>
						<button class="btn btn-danger"
								ng-click="deleteComment(order['case-id'], comment['id'])">Delete</button>

				</td>
			</tr>
			</tbody>
		</table>
	</div></p>


<div class="modal fade" id="addCommentModalDetails" tabindex="-1"
	role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">
					<span class="pficon pficon-close"></span>
				</button>
				<h4 class="modal-title" id="myModalLabel">Add comment</h4>
			</div>
			<div class="modal-body">
				<form class="form-horizontal">
					<div class="form-group">
						<label class="col-sm-3 control-label" for="textInput-modal-markup">Order
							number</label>
						<div class="col-sm-9">
							<input type="text" id="textInput-modal-markup"
								class="form-control" ng-model="orderNumber" disabled>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-3 control-label"
							for="textInput2-modal-markup">Comment</label>
						<div class="col-sm-9">
							<textarea id="textInput4-modal-markup" class="form-control"
								ng-model="newcomment.text"></textarea>
						</div>
					</div>
					<div class="form-group">
                        <label class="col-sm-3 control-label"
                            for="textInput2-modal-markup">Restricted to</label>
                        <div class="col-sm-9">
                            <label ng-repeat="role in roles">
							  <input
							    type="checkbox"
							    value="{{role}}"
							    ng-click="checkCommentsRestriction(role)"
							  > {{role}}
							  <br/>
							</label>
                        </div>
                    </div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary"
					ng-click="addComment()" data-dismiss="modal">Save</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="editCommentModalDetails" tabindex="-1"
	role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">
					<span class="pficon pficon-close"></span>
				</button>
				<h4 class="modal-title" id="myModalLabel">Edit comment</h4>
			</div>
			<div class="modal-body">
				<form class="form-horizontal">
					<div class="form-group">
						<label class="col-sm-3 control-label" for="textInput-modal-markup">Order
							number</label>
						<div class="col-sm-9">
							<input type="text" id="textInput-modal-markup"
								class="form-control" ng-model="orderNumber" disabled>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-3 control-label"
							for="textInput2-modal-markup">Comment</label>
						<div class="col-sm-9">
							<textarea id="textInput3-modal-markup" class="form-control"
								ng-model="comment.text"></textarea>
						</div>
					</div>
					<div class="form-group">
                        <label class="col-sm-3 control-label"
                            for="textInput2-modal-markup">Restricted to</label>
                        <div class="col-sm-9">
                            <label ng-repeat="role in roles">
                              <input
                                type="checkbox"
                                value="{{role}}"
                                ng-checked="comment['restricted-to'].indexOf(role) > -1"
                                ng-click="checkCommentsRestriction(role)"
                              > {{role}}
                              <br/>
                            </label>
                        </div>
                    </div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary"
					ng-click="saveComment()" data-dismiss="modal">Save</button>
			</div>
		</div>
	</div>
</div>
</div>
